image: openjdk:11

stages:
  - gradleBuild
  - gradleTest

gradle-build:
  stage: gradleBuild
  script: 
    - ./gradlew jar

gradle-test-analyser:
  stage: gradleTest 
  script: 
    - ./gradlew clean test --tests 'analyser.*'

gradle-test-arm:
  stage: gradleTest
  script:
    - ./gradlew clean test --tests 'generator.arm.*'

gradle-test-x86:
  stage: gradleTest
  script:
    - apt-get install -y nasm
    - ./gradlew clean test --tests 'generator.x86.*'